--- origsrc/qt-everywhere-opensource-src-4.7.1/src/3rdparty/javascriptcore/JavaScriptCore/jit/JITStubs.cpp	2010-11-05 20:55:22.000000000 -0500
+++ src/qt-everywhere-opensource-src-4.7.1/src/3rdparty/javascriptcore/JavaScriptCore/jit/JITStubs.cpp	2010-12-25 21:56:33.126035400 -0600
@@ -68,7 +68,7 @@ using namespace std;
 
 namespace JSC {
 
-#if OS(DARWIN) || OS(WINDOWS)
+#if OS(DARWIN) || ((OS(CYGWIN) || OS(WINDOWS)) && CPU(X86))
 #define SYMBOL_STRING(name) "_" #name
 #else
 #define SYMBOL_STRING(name) #name
--- origsrc/qt-everywhere-opensource-src-4.7.1/src/3rdparty/javascriptcore/JavaScriptCore/wtf/Platform.h	2010-11-05 20:55:22.000000000 -0500
+++ src/qt-everywhere-opensource-src-4.7.1/src/3rdparty/javascriptcore/JavaScriptCore/wtf/Platform.h	2010-12-25 22:12:19.865685300 -0600
@@ -340,6 +340,11 @@
 #define WTF_OS_AIX 1
 #endif
 
+/* OS(CYGWIN) - Cygwin */
+#ifdef __CYGWIN__
+#define WTF_OS_CYGWIN 1
+#endif
+
 /* OS(DARWIN) - Any Darwin-based OS, including Mac OS X and iPhone OS */
 #ifdef __APPLE__
 #define WTF_OS_DARWIN 1
@@ -438,6 +443,7 @@
 /* OS(UNIX) - Any Unix-like system */
 #if   OS(AIX)              \
     || OS(ANDROID)          \
+    || OS(CYGWIN)           \
     || OS(DARWIN)           \
     || OS(FREEBSD)          \
     || OS(HAIKU)            \
@@ -690,7 +696,7 @@
 
 #if !OS(WINDOWS) && !OS(SOLARIS) && !OS(QNX) \
     && !OS(SYMBIAN) && !OS(HAIKU) && !OS(RVCT) \
-    && !OS(ANDROID) && !OS(AIX) && !OS(HPUX)
+    && !OS(ANDROID) && !OS(AIX) && !OS(HPUX) && !OS(CYGWIN)
 #define HAVE_TM_GMTOFF 1
 #define HAVE_TM_ZONE 1
 #define HAVE_TIMEGM 1
@@ -874,7 +880,7 @@
 #define WTF_USE_JSVALUE64 1
 #elif CPU(ARM) || CPU(PPC64)
 #define WTF_USE_JSVALUE32 1
-#elif OS(WINDOWS) && COMPILER(MINGW)
+#elif OS(CYGWIN) || (OS(WINDOWS) && COMPILER(MINGW))
 /* Using JSVALUE32_64 causes padding/alignement issues for JITStubArg
 on MinGW. See https://bugs.webkit.org/show_bug.cgi?id=29268 */
 #define WTF_USE_JSVALUE32 1
@@ -909,6 +915,9 @@ on MinGW. See https://bugs.webkit.org/sh
 #elif CPU(X86) && OS(DARWIN)
     #define ENABLE_JIT 1
     #define WTF_USE_JIT_STUB_ARGUMENT_VA_LIST 1
+#elif CPU(X86) && OS(CYGWIN) && GCC_VERSION >= 40100
+    #define ENABLE_JIT 1
+    #define WTF_USE_JIT_STUB_ARGUMENT_VA_LIST 1
 #elif CPU(X86) && OS(WINDOWS) && COMPILER(MINGW) && GCC_VERSION >= 40100
     #define ENABLE_JIT 1
     #define WTF_USE_JIT_STUB_ARGUMENT_VA_LIST 1
--- origsrc/qt-everywhere-opensource-src-4.8.1/src/3rdparty/webkit/Source/JavaScriptCore/jit/JITStubs.cpp	2012-04-23 22:00:48.763189000 -0500
+++ src/qt-everywhere-opensource-src-4.8.1/src/3rdparty/webkit/Source/JavaScriptCore/jit/JITStubs.cpp	2012-04-24 11:20:21.333684600 -0500
@@ -67,7 +67,7 @@ using namespace std;
 
 namespace JSC {
 
-#if OS(DARWIN) || (OS(WINDOWS) && CPU(X86))
+#if OS(DARWIN) || ((OS(CYGWIN) || OS(WINDOWS)) && CPU(X86))
 #define SYMBOL_STRING(name) "_" #name
 #else
 #define SYMBOL_STRING(name) #name
@@ -83,7 +83,7 @@ namespace JSC {
 #define SYMBOL_STRING_RELOCATION(name) #name "@plt"
 #elif OS(DARWIN) || (CPU(X86_64) && COMPILER(MINGW) && !GCC_VERSION_AT_LEAST(4, 5, 0))
 #define SYMBOL_STRING_RELOCATION(name) "_" #name
-#elif CPU(X86) && COMPILER(MINGW)
+#elif CPU(X86) && (COMPILER(MINGW) || OS(CYGWIN))
 #define SYMBOL_STRING_RELOCATION(name) "@" #name "@4"
 #else
 #define SYMBOL_STRING_RELOCATION(name) #name
--- origsrc/qt-everywhere-opensource-src-4.8.1/src/3rdparty/webkit/Source/JavaScriptCore/jit/JITStubs.h	2012-03-14 09:01:26.000000000 -0500
+++ src/qt-everywhere-opensource-src-4.8.1/src/3rdparty/webkit/Source/JavaScriptCore/jit/JITStubs.h	2012-04-24 04:40:13.582855400 -0500
@@ -115,7 +115,7 @@ namespace JSC {
         ReturnAddressPtr* returnAddressSlot() { return reinterpret_cast<ReturnAddressPtr*>(this) - 1; }
     };
 #elif CPU(X86)
-#if COMPILER(MSVC) || (OS(WINDOWS) && COMPILER(GCC))
+#if COMPILER(MSVC) || OS(CYGWIN) || (OS(WINDOWS) && COMPILER(GCC))
 #pragma pack(push)
 #pragma pack(4)
 #endif // COMPILER(MSVC) || (OS(WINDOWS) && COMPILER(GCC))
@@ -142,7 +142,7 @@ namespace JSC {
         // When JIT code makes a call, it pushes its return address just below the rest of the stack.
         ReturnAddressPtr* returnAddressSlot() { return reinterpret_cast<ReturnAddressPtr*>(this) - 1; }
     };
-#if COMPILER(MSVC) || (OS(WINDOWS) && COMPILER(GCC))
+#if COMPILER(MSVC) || OS(CYGWIN) || (OS(WINDOWS) && COMPILER(GCC))
 #pragma pack(pop)
 #endif // COMPILER(MSVC) || (OS(WINDOWS) && COMPILER(GCC))
 #elif CPU(ARM_THUMB2)
--- origsrc/qt-everywhere-opensource-src-4.8.1/src/3rdparty/webkit/Source/JavaScriptCore/wtf/PageAllocationAligned.cpp	2012-03-14 09:01:26.000000000 -0500
+++ src/qt-everywhere-opensource-src-4.8.1/src/3rdparty/webkit/Source/JavaScriptCore/wtf/PageAllocationAligned.cpp	2012-05-13 08:47:43.832885100 -0500
@@ -50,7 +50,7 @@ PageAllocationAligned PageAllocationAlig
     vm_map(current_task(), &address, size, alignmentMask, flags, MEMORY_OBJECT_NULL, 0, FALSE, protection, PROT_READ | PROT_WRITE | PROT_EXEC, VM_INHERIT_DEFAULT);
     return PageAllocationAligned(reinterpret_cast<void*>(address), size);
 #else
-    size_t alignmentDelta = alignment - pageSize();
+    size_t alignmentDelta = abs(alignment - pageSize());
 
     // Resererve with suffcient additional VM to correctly align.
     size_t reservationSize = size + alignmentDelta;
--- origsrc/qt-everywhere-opensource-src-4.7.1/src/3rdparty/webkit/Source/JavaScriptCore/wtf/Platform.h	2010-11-05 20:55:19.000000000 -0500
+++ src/qt-everywhere-opensource-src-4.7.1/src/3rdparty/webkit/Source/JavaScriptCore/wtf/Platform.h	2010-12-25 22:20:29.582538500 -0600
@@ -325,6 +325,11 @@
 #define WTF_OS_AIX 1
 #endif
 
+/* OS(CYGWIN) - Cygwin */
+#ifdef __CYGWIN__
+#define WTF_OS_CYGWIN 1
+#endif
+
 /* OS(DARWIN) - Any Darwin-based OS, including Mac OS X and iPhone OS */
 #ifdef __APPLE__
 #define WTF_OS_DARWIN 1
@@ -412,6 +417,7 @@
 /* OS(UNIX) - Any Unix-like system */
 #if   OS(AIX)              \
     || OS(ANDROID)          \
+    || OS(CYGWIN)           \
     || OS(DARWIN)           \
     || OS(FREEBSD)          \
     || OS(HAIKU)            \
@@ -685,7 +691,7 @@
 
 #if !OS(WINDOWS) && !OS(SOLARIS) && !OS(QNX) \
     && !OS(SYMBIAN) && !OS(HAIKU) && !OS(RVCT) \
-    && !OS(ANDROID) && !PLATFORM(BREWMP)
+    && !OS(ANDROID) && !PLATFORM(BREWMP) && !OS(CYGWIN)
 #define HAVE_TM_GMTOFF 1
 #define HAVE_TM_ZONE 1
 #define HAVE_TIMEGM 1
--- origsrc/qt-everywhere-opensource-src-4.8.1/src/3rdparty/webkit/Source/JavaScriptCore/wtf/wtf.pri	2012-03-14 09:01:26.000000000 -0500
+++ src/qt-everywhere-opensource-src-4.8.1/src/3rdparty/webkit/Source/JavaScriptCore/wtf/wtf.pri	2012-04-24 11:52:08.104745700 -0500
@@ -41,7 +41,7 @@ SOURCES += \
     wtf/unicode/icu/CollatorICU.cpp \
     wtf/unicode/UTF8.cpp
 
-linux-*:!contains(DEFINES, USE_QTMULTIMEDIA=1) {
+linux-*|cygwin-*:!contains(DEFINES, USE_QTMULTIMEDIA=1) {
     !contains(QT_CONFIG, no-pkg-config):system(pkg-config --exists glib-2.0 gio-2.0 gstreamer-0.10): {
         DEFINES += ENABLE_GLIB_SUPPORT=1
         PKGCONFIG += glib-2.0 gio-2.0
--- origsrc/qt-everywhere-opensource-src-4.8.1/src/3rdparty/webkit/Source/WebCore/features.pri	2012-03-14 09:01:21.000000000 -0500
+++ src/qt-everywhere-opensource-src-4.8.1/src/3rdparty/webkit/Source/WebCore/features.pri	2012-04-24 00:40:41.800879300 -0500
@@ -167,7 +167,7 @@ symbian|maemo5|maemo6 {
         DEFINES += ENABLE_VIDEO=1
         DEFINES += WTF_USE_QTKIT=1
         DEFINES -= WTF_USE_QTKIT=0
-    } else: linux-*:!contains(DEFINES, USE_QTMULTIMEDIA=1) {
+    } else: linux-*|cygwin-*:!contains(DEFINES, USE_QTMULTIMEDIA=1) {
         !contains(QT_CONFIG, no-pkg-config):system(pkg-config --exists glib-2.0 gio-2.0 gstreamer-0.10): {
             DEFINES -= ENABLE_VIDEO=0
             DEFINES += ENABLE_VIDEO=1
--- origsrc/qt-everywhere-opensource-src-4.7.1/src/3rdparty/webkit/Source/WebCore/plugins/PluginDatabase.cpp	2010-11-05 20:55:22.000000000 -0500
+++ src/qt-everywhere-opensource-src-4.7.1/src/3rdparty/webkit/Source/WebCore/plugins/PluginDatabase.cpp	2010-12-25 22:21:30.665042400 -0600
@@ -410,7 +410,9 @@ void PluginDatabase::getPluginPathsInDir
     // FIXME: This should be a case insensitive set.
     HashSet<String> uniqueFilenames;
 
-#if defined(XP_UNIX)
+#if defined(__CYGWIN__)
+    String fileNameFilter("*.dll");
+#elif defined(XP_UNIX)
     String fileNameFilter("*.so");
 #else
     String fileNameFilter("");
